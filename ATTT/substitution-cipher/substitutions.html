<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Substitution Cipher</title>

<style>

body {
    font-family: Arial;
    background: #0f172a;
    color: white;
    padding: 30px;
}

.container {
    max-width: 700px;
    margin: auto;
    background: #1e293b;
    padding: 20px;
    border-radius: 10px;
}

.row {
    margin-top: 15px;
}

textarea, input {
    width: 100%;
    padding: 10px;
    font-size: 16px;
    border-radius: 5px;
    border: none;
}

button {
    padding: 10px 15px;
    margin-right: 8px;
    border: none;
    border-radius: 5px;
    background: #2563eb;
    color: white;
    font-weight: bold;
    cursor: pointer;
}

button:hover {
    background: #1d4ed8;
}

.key-box {
    background: black;
    padding: 10px;
    border-radius: 5px;
    font-family: monospace;
}

</style>
</head>

<body>

<div class="container">

<h2>üîê Substitution Cipher (One File Version)</h2>

<div class="row">
<label>Input Text (Plain or Cipher):</label>
<textarea id="plain"></textarea>
</div>

<div class="row">
<label>Enter Key (26 letters):</label>
<input id="keyInput" placeholder="Example: QWERTYUIOPASDFGHJKLZXCVBNM">
</div>

<div class="row">
<button onclick="generateKey()">Generate Random Key</button>
<button onclick="applyKey()">Apply Key</button>
<button onclick="encrypt()">Encrypt</button>
<button onclick="decrypt()">Decrypt</button>
</div>

<div class="row">
<label>Key Table:</label>
<div class="key-box">
PLAIN : <span id="plainKey"></span><br>
CIPHER: <span id="cipherKey"></span>
</div>
</div>

<div class="row">
<label>Result:</label>
<textarea id="result"></textarea>
</div>

</div>

<script>

const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
let key = "";


// =====================
// RANDOM KEY GENERATOR
// =====================
function generateKey() {

    let chars = alphabet.split("");

    for (let i = chars.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [chars[i], chars[j]] = [chars[j], chars[i]];
    }

    key = chars.join("");

    document.getElementById("plainKey").innerText = alphabet;
    document.getElementById("cipherKey").innerText = key;
    document.getElementById("keyInput").value = key;

    alert("Random Key Generated!");
}


// =====================
// APPLY MANUAL KEY
// =====================
function applyKey() {

    let inputKey = document.getElementById("keyInput").value.toUpperCase();

    if (inputKey.length !== 26) {
        alert("Key must contain exactly 26 letters!");
        return;
    }

    let unique = new Set(inputKey);

    if (unique.size !== 26) {
        alert("Key must not contain duplicate letters!");
        return;
    }

    key = inputKey;

    document.getElementById("plainKey").innerText = alphabet;
    document.getElementById("cipherKey").innerText = key;

    alert("Key Applied Successfully!");
}


// =====================
// ENCRYPT FUNCTION
// =====================
function encrypt() {

    if (key === "") {
        alert("Generate or apply key first!");
        return;
    }

    let text = document.getElementById("plain").value.toUpperCase();
    let result = "";

    for (let c of text) {

        if (alphabet.includes(c)) {
            let index = alphabet.indexOf(c);
            result += key[index];
        } else {
            result += c;
        }
    }

    document.getElementById("result").value = result;
}


// =====================
// DECRYPT FUNCTION
// =====================
function decrypt() {

    if (key === "") {
        alert("Generate or apply key first!");
        return;
    }

    let text = document.getElementById("plain").value.toUpperCase();
    let result = "";

    for (let c of text) {

        if (key.includes(c)) {
            let index = key.indexOf(c);
            result += alphabet[index];
        } else {
            result += c;
        }
    }

    document.getElementById("result").value = result;
}

</script>

</body>
</html>
